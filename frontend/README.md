# Frontend приложение

## Авторизация и регистрация
Работа начинается с регистрации: пользователь проходит валидации сначала на стороне фронта, потом на стороне бека.
Если все проверки пройдены, то пользователю отобразится сообщение об успешной регистрации, и возможности авторизоваться.
После логина пользователь получит 2 ключ – аксесс токен, который живет 15 минут, и рефреш-токен, который живет неделю.
При каждой загрузке страницы фронт отправляет запрос на `/refresh_token`, и получает аксесс токен.

## Обработка ошибок
Все ответы с бека приходят в следующем формате:
```typescript
interface IResponse {
  ok: Boolean;
  data: any | null;
  message: string[] | null;
};
```

Всегда приходят 3 поля, которые деструктуризируются при получении ответа. Сообщений может быть несколько, например,
при авторизации или регистрации, поэтому они передаются в формате массива. На фронте все ошибки обрабатываются
в блоках `try...catch`, поэтому любая шаблонная ошибка с сервера отобразится в виде уведомления.

Данные приходят в соответствии с запросом. Если мы запросили только один элемент, то получим объект, а если мы сделали
запрос за большим количеством данных, то придет уже массив.

Также реализована защита от "упавшего" сервера. При ошибке подключения к серверу, пользователя с любой страницы
перекидывает на `/bad-request`. При обновлении этой страницы будет отправлен запрос на `/refresh-token`, и если сервер
ответил, то дальше уже идет стандартный флоу: если всё ок, переходим на главную, иначе на страницу логина.

## Главная страница
На главной странице происходит загрузка всех кафе. У каждого кафе есть название, адрес, фото, меню и тд.
При нажатии на карточку кафе открывается более подробная информация о кафе. Подтягивается его меню, галерея изображений,
и вся остальная информация. В меню отображается изображение, название и цена товара.
Пока идет загрузка информации, на весь экран крутится лоадер. После получения аксесс токена или загрузки кафе, товаров,
и других элементов, которых нужно ждать с сервера, спиннер закрывается, и отображается контент.
Каждая карточка кафе и товара анимированны – после загрузке они появляются на экране друг за другом.

## Страница кафе
На этой странице отображается полная информация о кафе. Кнопка назад, слайдер с галереей фото, контакты и меню.
Если высота экрана устройства меньше 800, то на месте меню изначально скелет, который исчезает, когда пользователь
доскроллит до блока с меню, и запустится анимация карточек, а если высота экрана больше, то скелет уже не будет
отображаться. В каждой карточке выводится изображение, название и цена. На карточку можно кликнуть.

## Выбор товара
При нажатии на карточку товара, снизу выезжает экран заказа. Отображается большое изображение товара, его название,
цена, счетчик количества, и все доступные модификаторы: размер, вид молока, сироп и топпинг. У каждого товара свой
уникальный набор модификаторов, которые приходят с бека. Так, например, у круассана не будет молока.
Во время работы с формой настройки товара можно нажимать включать/выключать модификаторы, и это сразу обновит значение
итоговой цены. Для модификаторов реализованы компоненты, которые рендерят или radio-button, или check-box в зависимости
от поля `multi_selectable` с бека. Каждый компонент рендерит список, собирает данные о включенных элементах, и
передает в основной компонент модификатора используя `emit`.

При нажатии на кнопку формируется товар в корзину, и отправляется соответствующий запрос на бекенд.

## Оформление заказа

Во время оформления заказа можно увидеть место заказа, все выбранные товары, итоговую стоимость и кнопку заказа.
Каждый товар можно удалить из корзины, это автоматически обновит итоговую цену. Если товаров одного товара выбрано
больше одного, то в карточке товара отобразится цена за 1, а ниже уже домноженная на количество.
В проекте система оплаты не подключена, заказ сразу добавляется в БД и приходит в CRM.

## Экран заказов

У каждого заказа есть один из 4-х возможных статусов:

1. Принят
2. Готовится
3. Готов
4. Выполнен

В зависимости от статуса заказа меняется его положение на странице. Все завершенные заказы со статусом "Готов"
выводятся на отдельной вкладке.
У каждого заказа выводится его название, дата оформления, количество товаров, кафе и статус. При нажатии на карточку
заказа откроется окошко с подробной информацией.

## Информация о заказе

Эта страница по функционалу дублирует корзину, но она только для чтения. В шапке всплывающего окна отображаются номер
и статус заказа. Далее отображается дата и время заказа, а также кафе, в которое передали заказ.
Каждый элемент заказа выводится в отдельной карточке, с подсчётом количества общей цены и выводом комментария.
В самом конце окна выводятся детали оплаты – сумма заказа, работа сервиса и итоговая стоимость.
Страница адаптируется под разные размеры экранов, например, на узких экранах от 360рх меняется верстка карточек.
