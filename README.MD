# Приложение кофейни

Данное приложение состоит из трех частей:
1. Backend, написанный на Node.js с использованием `express + sqlite3`
2. Frontend, написанный на `vue.js 3` и библиотеки `antd`
3. CRM, также написанная на `vue.js 3` с библиотекой `antd`

## Порядок запуска
```shell
cd backend
npm install
npm run start

cd frontend
npm install
npm run start

cd crm
npm install
npm run start
```

В базу данных будут автоматически записаны дефолтные данные, чтобы можно было проверить базовый функционал. 


## Backend
На бекенде происходят основные вычисления и преобразования данных и создание куки для рефреш токена. 
Выбор пал на `sqlite3` из-за просты и удобства работы с SQL-like базами данных. Код написан в парадигме MVC – 
у каждой сущности в БД есть своя модель и контроллер, который запускает нужный метод во время запроса.

Реализована авторизация и аутентификация по refresh- и access-токенам. 
Рефреш токен живет в безопасной `httpOnly` куке только для страницы `/refresh_token` 15 минут. 
Аксесс токен живет только в оперативной памяти, после обновления страницы обнуляется. Этот токен можно получить как раз 
запросом на страницу `/refresh_token`, там бек проверит наличие и корректность рефреш-токена, и, если все ок,
выдаст аксесс токен, иначе вылетит ошибка 401.

Более подробная структура таблиц описана в README.MD в папке `backend`.

## Frontend
Код фронта написан на Vue.js 3 с использованием Composition API. Реализована авторизация, регистрация, работа с токенами,
запросы на бекенд за всей информацией, написаны авто-тесты. Все запросы написаны через нативное Fetch API, реализована кастомная middleware для проверки токена.

Более подробная информация о страницах уже в README.MD в папке `frontend`.

## CRM
«Админка» приложения, в которой собрана общая информация по бизнесу, а также есть возможность просмотреть статистику 
по каждому отдельному заведению, заказу и покупателю. Графики получают актуальные данные и строятся в реальном времени.
